## **ğŸ“… 2024ë…„ 3ì›” 20ì¼ ê°œë°œ ì‘ì—… ì •ë¦¬**

### **âœ… 1. API ê°œë°œ ë° ìˆ˜ì • ì‚¬í•­**
- AI ì¶”ì²œ ìš´ë™ í”„ë¡œê·¸ë¨ ê´€ë ¨ API ê°œë°œ ë° ìˆ˜ì •
  - ì—”ë“œí¬ì¸íŠ¸: `/api/v1/recommended-workouts/generate`
  - ê¸°ëŠ¥: OpenAI APIë¥¼ í™œìš©í•œ ë§ì¶¤í˜• ìš´ë™ í”„ë¡œê·¸ë¨ ìƒì„±
  - ì£¼ìš” ë³€ê²½ ì‚¬í•­: 
    - íšŒì›ì˜ ìš´ë™ ìˆ˜ì¤€ ë°˜ì˜
    - ì¤€ë¹„/ë§ˆë¬´ë¦¬ ìš´ë™ ì¶”ê°€
    - ìš´ë™ ì‹œê°„ ìë™ ê³„ì‚° ê¸°ëŠ¥
    - LangChain ë¼ì´ë¸ŒëŸ¬ë¦¬ ë„ì…ìœ¼ë¡œ API í˜¸ì¶œ ë°©ì‹ ê°œì„ 

ì˜ˆì œ ìš”ì²­:
```json
{
    "member_id": "550e8400-e29b-41d4-a716-446655440000",
    "session_id": "123e4567-e89b-12d3-a456-426614174000",
    "member_name": "í™ê¸¸ë™",
    "gender": "MALE",
    "fitness_goal": "ì²´ì¤‘ ê°ëŸ‰",
    "pt_duration": 60,
    "preferred_exercises": ["ìš”ê°€", "í•„ë¼í…ŒìŠ¤"],
    "remaining_sessions": 10,
    "has_injury": true,
    "injury_description": "ì–´ê¹¨ í†µì¦ì´ ìˆìŒ",
    "exercise_level": "BEGINNER"
}
```

ì˜ˆì œ ì‘ë‹µ:
```json
{
    "workout_name": "ì´ˆê¸‰ì ë§ì¶¤ ì „ì‹  ìš´ë™ í”„ë¡œê·¸ë¨",
    "total_duration": 60,
    "exercises": [
        {
            "exercise_name": "ê°€ë²¼ìš´ ìŠ¤íŠ¸ë ˆì¹­",
            "sets": 1,
            "repetitions": 10,
            "duration": 300,
            "rest_time": 30,
            "description": "ì „ì‹  ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ ì¤€ë¹„ìš´ë™",
            "sequence": 1
        },
        {
            "exercise_name": "ìˆ„ë” í”„ë ˆìŠ¤",
            "sets": 3,
            "repetitions": 12,
            "duration": 45,
            "rest_time": 60,
            "description": "ì–´ê¹¨ í†µì¦ì„ ê³ ë ¤í•œ ê°€ë²¼ìš´ ë¬´ê²Œë¡œ ì‹¤ì‹œ",
            "sequence": 2
        }
    ]
}
```

### **âœ… 2. ë²„ê·¸ ìˆ˜ì • ì‚¬í•­**
- OpenAI API í‚¤ ë…¸ì¶œ ë¬¸ì œ í•´ê²°
  - ë¬¸ì œ ì›ì¸: `.env` íŒŒì¼ì´ Gitì— ì§ì ‘ ì»¤ë°‹ë˜ì–´ API í‚¤ê°€ ë…¸ì¶œë¨
  - í•´ê²° ë°©ë²•:
    1. Git íˆìŠ¤í† ë¦¬ì—ì„œ `.env` íŒŒì¼ ì™„ì „ ì œê±°
    2. `.gitignore`ì— `.env` ì¶”ê°€
    3. `.env.example` íŒŒì¼ ìƒì„±í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ í˜•ì‹ ê³µìœ 

### **âœ… 3. ê¸°ìˆ ì  ê°œì„  ì‚¬í•­**
1. OpenAI API í˜¸ì¶œ ë°©ì‹ ê°œì„ 
   ```python
   # ê¸°ì¡´ ì½”ë“œ (ì§ì ‘ OpenAI API ì‚¬ìš©)
   import openai
   openai.api_key = settings.OPENAI_API_KEY
   
   response = openai.ChatCompletion.create(
       model="gpt-3.5-turbo",
       messages=[{"role": "user", "content": prompt}]
   )

   # ê°œì„ ëœ ì½”ë“œ (LangChain ì‚¬ìš©)
   from langchain_openai import ChatOpenAI
   from langchain_community.callbacks import get_openai_callback
   
   llm = ChatOpenAI(
       temperature=settings.OPENAI_TEMPERATURE,
       model_name=settings.OPENAI_MODEL,
       openai_api_key=settings.OPENAI_API_KEY,
       streaming=False
   )

   with get_openai_callback() as cb:
       response = llm.invoke(prompt)
       print(f"í† í° ì‚¬ìš©ëŸ‰: {cb.total_tokens}")
       print(f"ë¹„ìš©: ${cb.total_cost:.6f}")
   ```

2. ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ í•´ê²°
   ```python
   # ê¸°ì¡´ ì½”ë“œ (ìˆœí™˜ ì°¸ì¡° ë°œìƒ)
   # member_model.py
   from app.models.pt_session import PTSession
   
   class Member(Base):
       pt_sessions = relationship("PTSession", back_populates="member")

   # pt_session.py
   from app.models.member_model import Member
   
   class PTSession(Base):
       member = relationship("Member", back_populates="pt_sessions")

   # ê°œì„ ëœ ì½”ë“œ (ë¬¸ìì—´ë¡œ ì°¸ì¡°)
   # member_model.py
   class Member(Base):
       pt_sessions = relationship("PTSession", back_populates="member")

   # pt_session.py
   class PTSession(Base):
       member = relationship("Member", back_populates="pt_sessions")
   ```

### **ğŸ”¥ 4. ì£¼ìš” ì´ìŠˆ í•´ê²° (ê°€ì¥ ë§ì€ ì‹œê°„ íˆ¬ì)**
1. **ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ (í•´ê²°ì— ê°€ì¥ ë§ì€ ì‹œê°„ ì†Œìš”)**
   - ë¬¸ì œ: ëª¨ë¸ ê°„ì˜ ìƒí˜¸ ì°¸ì¡°ë¡œ ì¸í•œ ìˆœí™˜ ì°¸ì¡° ë°œìƒ
   - ì›ì¸ ë¶„ì„: 
     - Memberì™€ PTSession ëª¨ë¸ì´ ì„œë¡œë¥¼ ì§ì ‘ importí•˜ë©´ì„œ ìˆœí™˜ ì°¸ì¡° ë°œìƒ
     - ì´ë¡œ ì¸í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ImportError ë°œìƒ
   - ë¬¸ì œê°€ ëœ ì½”ë“œ:
     ```python
     # app/models/member_model.py
     from app.models.pt_session import PTSession  # ìˆœí™˜ ì°¸ì¡° ë°œìƒ
     from app.models.exercise_record import ExerciseRecord
     from sqlalchemy.orm import relationship
     
     class Member(Base):
         __tablename__ = "members"
         id = Column(String(36), primary_key=True)
         # ... ë‹¤ë¥¸ í•„ë“œë“¤ ...
         
         # ì§ì ‘ ëª¨ë¸ì„ importí•˜ì—¬ ì‚¬ìš©
         pt_sessions = relationship(PTSession, back_populates="member")
         exercise_records = relationship(ExerciseRecord, back_populates="member")

     # app/models/pt_session.py
     from app.models.member_model import Member  # ìˆœí™˜ ì°¸ì¡° ë°œìƒ
     from app.models.exercise_record import ExerciseRecord
     from sqlalchemy.orm import relationship
     
     class PTSession(Base):
         __tablename__ = "pt_sessions"
         id = Column(String(36), primary_key=True)
         member_id = Column(String(36), ForeignKey('members.id'))
         # ... ë‹¤ë¥¸ í•„ë“œë“¤ ...
         
         # ì§ì ‘ ëª¨ë¸ì„ importí•˜ì—¬ ì‚¬ìš©
         member = relationship(Member, back_populates="pt_sessions")
         exercise_records = relationship(ExerciseRecord, back_populates="session")
     ```

   - í•´ê²° ê³¼ì •:
     1. ìˆœí™˜ ì°¸ì¡°ê°€ ë°œìƒí•˜ëŠ” ëª¨ë“  ëª¨ë¸ ê´€ê³„ íŒŒì•…
     2. SQLAlchemyì˜ relationship ì„¤ì • ë°©ì‹ ì—°êµ¬
     3. ë‹¤ì–‘í•œ í•´ê²° ë°©ë²• ì‹œë„ (ì§€ì—° ë¡œë”©, ë¬¸ìì—´ ì°¸ì¡° ë“±)

   - ìµœì¢… í•´ê²°ëœ ì½”ë“œ:
     ```python
     # app/models/member_model.py
     from sqlalchemy.orm import relationship
     
     class Member(Base):
         __tablename__ = "members"
         id = Column(String(36), primary_key=True)
         # ... ë‹¤ë¥¸ í•„ë“œë“¤ ...
         
         # ë¬¸ìì—´ë¡œ ëª¨ë¸ ì°¸ì¡°
         pt_sessions = relationship("PTSession", back_populates="member")
         exercise_records = relationship("ExerciseRecord", back_populates="member")

     # app/models/pt_session.py
     from sqlalchemy.orm import relationship
     
     class PTSession(Base):
         __tablename__ = "pt_sessions"
         id = Column(String(36), primary_key=True)
         member_id = Column(String(36), ForeignKey('members.id'))
         # ... ë‹¤ë¥¸ í•„ë“œë“¤ ...
         
         # ë¬¸ìì—´ë¡œ ëª¨ë¸ ì°¸ì¡°
         member = relationship("Member", back_populates="pt_sessions")
         exercise_records = relationship("ExerciseRecord", back_populates="session")

     # app/models/__init__.py
     from .base import Base
     from .member_model import Member
     from .pt_session import PTSession
     from .exercise_record import ExerciseRecord

     # ëª¨ë“  ëª¨ë¸ì„ í•œ ë²ˆì— import
     __all__ = ['Base', 'Member', 'PTSession', 'ExerciseRecord']
     ```

   - ìµœì¢… í•´ê²° ë°©ë²•:
     - relationship ì •ì˜ ì‹œ ë¬¸ìì—´ë¡œ ëª¨ë¸ ì°¸ì¡°
     - `__init__.py`ì—ì„œ ëª¨ë“  ëª¨ë¸ì„ í•œ ë²ˆì— importí•˜ì—¬ ìˆœí™˜ ì°¸ì¡° ë°©ì§€
     - ê° ëª¨ë¸ íŒŒì¼ì—ì„œ ë‹¤ë¥¸ ëª¨ë¸ ì§ì ‘ import ì œê±°

   - í•™ìŠµí•œ ì :
     - SQLAlchemyì˜ relationship ë™ì‘ ë°©ì‹ ì´í•´
     - Pythonì˜ ëª¨ë“ˆ ë¡œë”© ë©”ì»¤ë‹ˆì¦˜ì— ëŒ€í•œ ì´í•´
     - ìˆœí™˜ ì°¸ì¡°ë¥¼ í”¼í•˜ëŠ” ì„¤ê³„ íŒ¨í„´
     - SQLAlchemyì—ì„œ ë¬¸ìì—´ ì°¸ì¡°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì™€ ì¥ì 

2. **Git ë³´ì•ˆ ì´ìŠˆ**
   - ë¬¸ì œ: GitHub ë³´ì•ˆ ê²€ì‚¬ì—ì„œ API í‚¤ ë…¸ì¶œ ê°ì§€
   - ì›ì¸ ë¶„ì„: í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ì´ Gitì— í¬í•¨ë¨
   - í•´ê²° ê³¼ì •: 
     1. Git íˆìŠ¤í† ë¦¬ì—ì„œ API í‚¤ ì™„ì „ ì œê±°ë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ ì‹œë„
     2. `git filter-branch` ëª…ë ¹ì–´ ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤ í•´ê²°
     3. ì›ê²© ì €ì¥ì†Œ ê°•ì œ í‘¸ì‹œ í›„ ë°œìƒí•˜ëŠ” ë¬¸ì œ ëŒ€ì‘
   - ìµœì¢… í•´ê²° ë°©ë²•: 
     - `git filter-branch` ëª…ë ¹ì–´ë¡œ íˆìŠ¤í† ë¦¬ ì •ë¦¬
     - í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ ë°©ì‹ ê°œì„ 
   - í•™ìŠµí•œ ì :
     - Git íˆìŠ¤í† ë¦¬ ê´€ë¦¬ì˜ ì¤‘ìš”ì„±
     - í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤
     - GitHub ë³´ì•ˆ ì •ì±…ì— ëŒ€í•œ ì´í•´

3. OpenAI API ì—°ë™ ë¬¸ì œ
   - ë¬¸ì œ: API í‚¤ ë¡œë”© ì‹¤íŒ¨
   - ì›ì¸: í™˜ê²½ ë³€ìˆ˜ ë¡œë”© ì‹œì  ë¬¸ì œ
   - í•´ê²°: 
     - dotenv ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ìš©
     - LangChainìœ¼ë¡œ API í˜¸ì¶œ ë°©ì‹ ë³€ê²½
     - ì´ˆê¸°í™” ìˆœì„œ ì¡°ì •

